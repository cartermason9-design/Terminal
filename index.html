<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Terminal → Futuristic HUD</title>

    <style>
      :root {
        --bg: #000;
        --cyan: #58b7ff;
        --cyanA: rgba(88, 183, 255, 0.85);
        --cyanB: rgba(88, 183, 255, 0.55);
        --cyanC: rgba(88, 183, 255, 0.22);
        --cyanD: rgba(88, 183, 255, 0.12);
        --glow: rgba(88, 183, 255, 0.35);
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        height: 100%;
        background: var(--bg);
        overflow: hidden;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          monospace;
        color: var(--cyanA);
      }

      /* =========================
   LOADER (code spam)
   ========================= */
      .overlay {
        position: fixed;
        inset: 0;
        background: #000;
        opacity: 1;
        transition: opacity 0.6s ease;
        pointer-events: none;
        z-index: 50;
      }
      .overlay.hide {
        opacity: 0;
      }

      .termWrap {
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        padding: 18px;
        overflow: hidden;
      }

      .scroller {
        height: 100%;
        overflow: auto;
        scrollbar-width: none;
      }
      .scroller::-webkit-scrollbar {
        width: 0;
        height: 0;
      }

      .term {
        color: rgba(88, 183, 255, 0.95);
        font-size: 12px;
        line-height: 1.35;
        text-shadow: 0 0 14px var(--glow);
        white-space: pre;
        user-select: none;
        padding-bottom: 40px;
      }

      .cursor {
        display: inline-block;
        width: 8px;
        height: 14px;
        margin-left: 6px;
        vertical-align: -2px;
        background: rgba(88, 183, 255, 0.9);
        box-shadow: 0 0 14px rgba(88, 183, 255, 0.45);
        animation: blink 0.85s steps(1) infinite;
      }
      @keyframes blink {
        50% {
          opacity: 0;
        }
      }

      .terminalWord {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 56px;
        letter-spacing: 0.18em;
        text-transform: uppercase;
        color: rgba(88, 183, 255, 0.9);
        text-shadow: 0 0 28px rgba(88, 183, 255, 0.25),
          0 0 80px rgba(88, 183, 255, 0.12);
        opacity: 0;
        transition: opacity 0.6s ease;
      }
      .terminalWord.show {
        opacity: 1;
      }

      /* =========================
   HUD SCREEN (futuristic)
   ========================= */
      .hud {
        position: fixed;
        inset: 0;
        background: #050a0f;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.8s ease;
        z-index: 10;
      }
      .hud.show {
        opacity: 1;
        pointer-events: auto;
      }

      .hudGrid {
        position: absolute;
        inset: 0;
        background: radial-gradient(
            800px 500px at 50% 30%,
            rgba(88, 183, 255, 0.1),
            transparent 60%
          ),
          radial-gradient(
            700px 500px at 75% 55%,
            rgba(88, 183, 255, 0.06),
            transparent 55%
          ),
          linear-gradient(to bottom, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.65)),
          repeating-linear-gradient(
            to right,
            rgba(88, 183, 255, 0.06),
            rgba(88, 183, 255, 0.06) 1px,
            transparent 1px,
            transparent 52px
          ),
          repeating-linear-gradient(
            to bottom,
            rgba(88, 183, 255, 0.06),
            rgba(88, 183, 255, 0.06) 1px,
            transparent 1px,
            transparent 52px
          );
        opacity: 0.88;
      }

      .scanlines {
        position: absolute;
        inset: -40px;
        pointer-events: none;
        background: repeating-linear-gradient(
          to bottom,
          rgba(255, 255, 255, 0.045),
          rgba(255, 255, 255, 0.045) 1px,
          transparent 1px,
          transparent 5px
        );
        opacity: 0.08;
        animation: scan 7s linear infinite;
      }
      @keyframes scan {
        from {
          transform: translateY(0);
        }
        to {
          transform: translateY(40px);
        }
      }

      .topBar {
        position: relative;
        z-index: 2;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        padding: 10px 14px;
        border-bottom: 1px solid var(--cyanC);
      }

      .topLeft,
      .topRight {
        display: flex;
        gap: 10px;
        align-items: center;
      }
      .topCenter {
        display: flex;
        gap: 10px;
        flex: 1;
        justify-content: center;
      }

      .tab {
        font-size: 11px;
        letter-spacing: 0.14em;
        color: rgba(88, 183, 255, 0.7);
        padding: 6px 10px;
        border: 1px solid rgba(88, 183, 255, 0.18);
        background: rgba(0, 0, 0, 0.35);
      }
      .tab.active {
        color: rgba(88, 183, 255, 0.95);
        border-color: rgba(88, 183, 255, 0.28);
        box-shadow: 0 0 20px rgba(88, 183, 255, 0.08);
      }

      .pill {
        font-size: 11px;
        color: rgba(88, 183, 255, 0.9);
        padding: 6px 10px;
        border: 1px solid rgba(88, 183, 255, 0.18);
        background: rgba(0, 0, 0, 0.35);
        min-width: 120px;
        text-align: center;
      }
      .pill.muted {
        color: rgba(88, 183, 255, 0.45);
        border-color: rgba(88, 183, 255, 0.12);
      }

      .mainGrid {
        position: relative;
        z-index: 2;
        display: grid;
        grid-template-columns: 280px 1fr 320px;

        /* was: 1fr 220px 240px */
        grid-template-rows: 1fr 200px 200px;

        gap: 12px;
        padding: 12px;
        height: calc(100vh - 52px);
      }

      .panel {
        border: 1px solid rgba(88, 183, 255, 0.18);
        background: rgba(0, 0, 0, 0.55);
        box-shadow: inset 0 0 0 1px rgba(88, 183, 255, 0.06),
          0 10px 35px rgba(0, 0, 0, 0.35);
        padding: 10px;
        overflow: hidden;
      }

      .panelTitle {
        font-size: 11px;
        letter-spacing: 0.14em;
        text-transform: uppercase;
        color: rgba(88, 183, 255, 0.85);
        padding-bottom: 8px;
        border-bottom: 1px solid rgba(88, 183, 255, 0.12);
        margin-bottom: 10px;
      }

      .leftCol {
        grid-row: 1 / span 3;
        grid-column: 1;
      }
      .centerCol {
        grid-row: 1;
        grid-column: 2;
      }
      .rightCol {
        grid-row: 1;
        grid-column: 3;
      }
      .bottomFiles {
        grid-row: 2 / span 2;
        grid-column: 2;
      }
      .keyboard {
        grid-row: 2 / span 2;
        grid-column: 3;
      }

      .bigClock {
        font-size: 34px;
        color: rgba(88, 183, 255, 0.95);
        text-shadow: 0 0 16px rgba(88, 183, 255, 0.18);
        margin: 8px 0 12px 0;
      }

      .kv .k {
        color: rgba(88, 183, 255, 0.55);
        letter-spacing: 0.08em;
        font-size: 11px;
      }
      .kv .v {
        color: rgba(88, 183, 255, 0.92);
        font-size: 11px;
        margin-left: 6px;
      }

      .miniTitle {
        margin-top: 12px;
        font-size: 11px;
        letter-spacing: 0.12em;
        color: rgba(88, 183, 255, 0.75);
      }

      .sparkBox {
        margin-top: 6px;
        border: 1px solid rgba(88, 183, 255, 0.12);
        padding: 8px;
      }
      .spark {
        width: 100%;
        height: 60px;
      }
      .spark path {
        fill: none;
        stroke: rgba(88, 183, 255, 0.85);
        stroke-width: 2;
        filter: drop-shadow(0 0 10px rgba(88, 183, 255, 0.15));
      }
      .sparkMeta {
        display: flex;
        justify-content: space-between;
        margin-top: 6px;
        font-size: 11px;
      }

      .bar {
        height: 10px;
        border: 1px solid rgba(88, 183, 255, 0.14);
        margin-top: 6px;
        background: rgba(0, 0, 0, 0.3);
      }
      .barFill {
        height: 100%;
        width: 68%;
        background: linear-gradient(
          90deg,
          rgba(88, 183, 255, 0.15),
          rgba(88, 183, 255, 0.55)
        );
      }

      .table {
        margin-top: 8px;
      }
      .row {
        display: grid;
        grid-template-columns: 50px 1fr 60px 60px;
        gap: 8px;
        font-size: 11px;
        padding: 6px 0;
        color: rgba(88, 183, 255, 0.85);
        border-bottom: 1px solid rgba(88, 183, 255, 0.08);
      }
      .row.head {
        color: rgba(88, 183, 255, 0.55);
        letter-spacing: 0.08em;
      }

      .btnRow {
        display: flex;
        gap: 8px;
        margin-top: 12px;
      }
      .hudBtn {
        background: rgba(0, 0, 0, 0.35);
        border: 1px solid rgba(88, 183, 255, 0.18);
        color: rgba(88, 183, 255, 0.85);
        font-size: 11px;
        letter-spacing: 0.12em;
        padding: 8px 10px;
      }

      /* ===== Interactive Terminal ===== */
      .termLive {
        height: calc(100% - 74px);
        overflow: auto;
        white-space: pre;
        color: rgba(88, 183, 255, 0.82);
        font-size: 11px;
        line-height: 1.45;
        padding-right: 6px;
        scrollbar-width: none;
      }
      .termLive::-webkit-scrollbar {
        width: 0;
        height: 0;
      }

      .termInputRow {
        display: flex;
        align-items: center;
        gap: 10px;
        padding-top: 10px;
        border-top: 1px solid rgba(88, 183, 255, 0.12);
      }

      .prompt {
        color: rgba(88, 183, 255, 0.6);
        font-size: 11px;
        letter-spacing: 0.06em;
        user-select: none;
        white-space: nowrap;
      }

      .termInput {
        flex: 1;
        background: transparent;
        border: 0;
        outline: none;
        color: rgba(88, 183, 255, 0.9);
        font-size: 11px;
        letter-spacing: 0.04em;
        text-shadow: 0 0 12px rgba(88, 183, 255, 0.1);
      }

      /* ===== Globe ===== */
      .worldBox {
        margin-top: 8px;
        border: 1px solid rgba(88, 183, 255, 0.12);
        height: 170px;
        position: relative;
        overflow: hidden;
        background: rgba(0, 0, 0, 0.25);
      }

      .globe {
        position: absolute;
        left: 50%;
        top: 48%;
        width: 150px;
        height: 150px;
        transform: translate(-50%, -50%);
        border-radius: 50%;
        border: 1px solid rgba(88, 183, 255, 0.22);
        box-shadow: 0 0 30px rgba(88, 183, 255, 0.1);
        overflow: hidden;
      }

      .globeSphere {
        position: absolute;
        inset: 0;
        background: radial-gradient(
            circle at 35% 35%,
            rgba(88, 183, 255, 0.2),
            transparent 55%
          ),
          radial-gradient(
            circle at 60% 60%,
            rgba(88, 183, 255, 0.1),
            transparent 55%
          ),
          radial-gradient(
            circle at 50% 50%,
            rgba(0, 0, 0, 0),
            rgba(0, 0, 0, 0.38)
          );
      }

      .globeGrid {
        position: absolute;
        inset: -50%;
        background: repeating-linear-gradient(
            to right,
            rgba(88, 183, 255, 0.2),
            rgba(88, 183, 255, 0.2) 1px,
            transparent 1px,
            transparent 18px
          ),
          repeating-linear-gradient(
            to bottom,
            rgba(88, 183, 255, 0.16),
            rgba(88, 183, 255, 0.16) 1px,
            transparent 1px,
            transparent 18px
          ),
          radial-gradient(circle, transparent 55%, rgba(0, 0, 0, 0.28) 70%);
        opacity: 0.38;
        transform: translateX(0);
        will-change: transform;
      }

      .globeDots {
        position: absolute;
        inset: 0;
        background: radial-gradient(
          rgba(88, 183, 255, 0.22) 1px,
          transparent 1px
        );
        background-size: 12px 12px;
        opacity: 0.22;
        mix-blend-mode: screen;
      }

      .worldLabel {
        position: absolute;
        left: 10px;
        bottom: 10px;
        font-size: 11px;
      }
      .worldLabel .k {
        color: rgba(88, 183, 255, 0.55);
      }
      .worldLabel .v {
        color: rgba(88, 183, 255, 0.92);
        margin-top: 2px;
      }

      /* ===== Files & keyboard (same vibe) ===== */
      .fileGrid {
        display: grid;
        grid-template-columns: repeat(10, minmax(0, 1fr));
        gap: 10px;
        margin-top: 8px;
      }
      .file {
        text-align: center;
        color: rgba(88, 183, 255, 0.7);
        font-size: 10px;
      }
      .icon {
        width: 26px;
        height: 20px;
        margin: 0 auto 6px auto;
        border: 1px solid rgba(88, 183, 255, 0.2);
        background: rgba(0, 0, 0, 0.25);
      }
      .icon.folder {
        border-radius: 4px;
      }
      .icon.file {
        border-radius: 2px;
        height: 24px;
      }

      .scrollBarFake {
        margin-top: 10px;
        height: 6px;
        border: 1px solid rgba(88, 183, 255, 0.14);
        background: rgba(0, 0, 0, 0.25);
      }

      .keys {
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        gap: 8px;
        margin-top: 10px;
      }
      .key {
        border: 1px solid rgba(88, 183, 255, 0.16);
        background: rgba(0, 0, 0, 0.35);
        color: rgba(88, 183, 255, 0.8);
        text-align: center;
        padding: 10px 0;
        font-size: 11px;
      }
      .key.wide {
        grid-column: span 2;
      }
      .key.space {
        grid-column: span 6;
      }
    </style>
  </head>

  <body>
    <!-- LOADER -->
    <div class="overlay" id="overlay">
      <div class="termWrap">
        <div class="scroller" id="loaderScroller">
          <div class="term" id="loaderTerm"></div>
        </div>
      </div>
      <div class="terminalWord" id="terminalWord">Terminal</div>
    </div>

    <!-- HUD -->
    <div class="hud" id="hud">
      <div class="hudGrid"></div>
      <div class="scanlines"></div>

      <div class="topBar">
        <div class="topLeft">
          <div class="tab">PANEL</div>
          <div class="tab active">SYSTEM</div>
          <div class="tab">TERMINAL</div>
        </div>

        <div class="topCenter">
          <div class="pill">MAIN - bash</div>
          <div class="pill muted">EMPTY</div>
          <div class="pill muted">EMPTY</div>
          <div class="pill muted">EMPTY</div>
          <div class="pill muted">EMPTY</div>
        </div>

        <div class="topRight">
          <div class="tab">NETWORK</div>
          <div class="tab active">MAIN SHELL</div>
        </div>
      </div>

      <div class="mainGrid">
        <!-- LEFT -->
        <div class="panel leftCol">
          <div class="panelTitle">SYSTEM</div>
          <div class="bigClock" id="clock">00:00:00</div>

          <div class="kv">
            <div>
              <span class="k">DATE</span>
              <span class="v" id="dateLine">JAN 1 2026</span>
            </div>
            <div>
              <span class="k">UPTIME</span>
              <span class="v" id="uptimeLine">00:00:00</span>
            </div>
            <div><span class="k">TYPE</span> <span class="v">POWER</span></div>
            <div><span class="k">LINK</span> <span class="v">WIRED</span></div>
          </div>

          <div class="miniTitle">CPU USAGE</div>
          <div class="sparkBox">
            <svg viewBox="0 0 220 50" class="spark">
              <path
                id="cpuPath"
                d="M0,35 L20,30 L40,33 L60,22 L80,26 L100,20 L120,23 L140,15 L160,18 L180,12 L200,17 L220,10"
              />
            </svg>
            <div class="sparkMeta">
              <div>
                <span class="k">AVG</span>
                <span class="v" id="cpuAvg">38%</span>
              </div>
              <div>
                <span class="k">PEAK</span>
                <span class="v" id="cpuPeak">91%</span>
              </div>
            </div>
          </div>

          <div class="miniTitle">MEMORY</div>
          <div class="bar"><div class="barFill" id="memFill"></div></div>
          <div class="kvSmall">
            <span class="k">USING</span>
            <span class="v" id="memLine">5.8 / 7.9 GB</span>
          </div>

          <div class="miniTitle">TOP PROCESSES</div>
          <div class="table">
            <div class="row head">
              <div>PID</div>
              <div>NAME</div>
              <div>CPU</div>
              <div>MEM</div>
            </div>
            <div class="row">
              <div>3588</div>
              <div>electron</div>
              <div id="p1c">15.2%</div>
              <div>1.9%</div>
            </div>
            <div class="row">
              <div>3449</div>
              <div>electron</div>
              <div id="p2c">5.9%</div>
              <div>1.4%</div>
            </div>
            <div class="row">
              <div>3468</div>
              <div>electron</div>
              <div id="p3c">3.7%</div>
              <div>1.1%</div>
            </div>
            <div class="row">
              <div>1521</div>
              <div>pulseaudio</div>
              <div id="p4c">2.4%</div>
              <div>0.9%</div>
            </div>
          </div>

          <div class="btnRow">
            <button class="hudBtn" type="button">COPY</button>
            <button class="hudBtn" type="button">PASTE</button>
          </div>
        </div>

        <!-- CENTER -->
        <div class="panel centerCol">
          <div class="panelTitle">MAIN - bash</div>

          <div
            class="termLive"
            id="centerTerminal"
            aria-label="terminal output"
          ></div>

          <div class="termInputRow">
            <span class="prompt">main@terminal:~$</span>
            <input
              id="termInput"
              class="termInput"
              autocomplete="off"
              spellcheck="false"
            />
          </div>
        </div>

        <!-- RIGHT -->
        <div class="panel rightCol">
          <div class="panelTitle">NETWORK STATUS</div>

          <div class="kv">
            <div><span class="k">STATE</span> <span class="v">IPV4</span></div>
            <div>
              <span class="k">ONLINE</span>
              <span class="v" id="ipLine">90.151.92.179</span>
            </div>
            <div>
              <span class="k">PING</span>
              <span class="v" id="pingLine">12ms</span>
            </div>
          </div>

          <div class="miniTitle">WORLD VIEW</div>
          <div class="worldBox">
            <div class="globe" id="globe">
              <div class="globeSphere"></div>
              <div class="globeDots"></div>
              <div class="globeGrid" id="globeGrid"></div>
            </div>

            <div class="worldLabel">
              <div class="k">ENDPOINT LAT/LON</div>
              <div class="v" id="latlon">-26.2041, 28.0473</div>
            </div>
          </div>

          <div class="miniTitle">NETWORK TRAFFIC</div>
          <div class="sparkBox">
            <svg viewBox="0 0 220 60" class="spark">
              <path
                id="netPath"
                d="M0,45 L20,40 L40,44 L60,15 L80,42 L100,30 L120,48 L140,20 L160,35 L180,18 L200,28 L220,22"
              />
            </svg>
            <div class="sparkMeta">
              <div>
                <span class="k">UP</span>
                <span class="v" id="upLine">32.1 GB</span>
              </div>
              <div>
                <span class="k">DOWN</span>
                <span class="v" id="downLine">86.7 GB</span>
              </div>
            </div>
          </div>
        </div>

        <!-- BOTTOM FILES -->
        <div class="panel bottomFiles">
          <div class="panelTitle">FILESYSTEM</div>
          <div class="fileGrid">
            <div class="file">
              <div class="icon folder"></div>
              <div class="name">logs</div>
            </div>
            <div class="file">
              <div class="icon folder"></div>
              <div class="name">src</div>
            </div>
            <div class="file">
              <div class="icon folder"></div>
              <div class="name">bin</div>
            </div>
            <div class="file">
              <div class="icon folder"></div>
              <div class="name">config</div>
            </div>
            <div class="file">
              <div class="icon folder"></div>
              <div class="name">vendor</div>
            </div>
            <div class="file">
              <div class="icon file"></div>
              <div class="name">build</div>
            </div>
            <div class="file">
              <div class="icon file"></div>
              <div class="name">README</div>
            </div>
            <div class="file">
              <div class="icon file"></div>
              <div class="name">routes</div>
            </div>
            <div class="file">
              <div class="icon folder"></div>
              <div class="name">tests</div>
            </div>
            <div class="file">
              <div class="icon folder"></div>
              <div class="name">tmp</div>
            </div>
          </div>
          <div class="scrollBarFake"></div>
        </div>

        <!-- KEYBOARD -->
        <div class="panel keyboard">
          <div class="panelTitle">INPUT</div>
          <div class="keys">
            <div class="key wide">ESC</div>
            <div class="key">1</div>
            <div class="key">2</div>
            <div class="key">3</div>
            <div class="key">4</div>
            <div class="key">5</div>
            <div class="key">6</div>
            <div class="key">7</div>
            <div class="key">8</div>
            <div class="key">9</div>
            <div class="key">0</div>
            <div class="key wide">BACK</div>

            <div class="key wide">TAB</div>
            <div class="key">Q</div>
            <div class="key">W</div>
            <div class="key">E</div>
            <div class="key">R</div>
            <div class="key">T</div>
            <div class="key">Y</div>
            <div class="key">U</div>
            <div class="key">I</div>
            <div class="key">O</div>
            <div class="key">P</div>
            <div class="key wide">ENTER</div>

            <div class="key wide">SHIFT</div>
            <div class="key">A</div>
            <div class="key">S</div>
            <div class="key">D</div>
            <div class="key">F</div>
            <div class="key">G</div>
            <div class="key">H</div>
            <div class="key">J</div>
            <div class="key">K</div>
            <div class="key">L</div>
            <div class="key wide">SHIFT</div>

            <div class="key wide">CTRL</div>
            <div class="key">FN</div>
            <div class="key space">SPACE</div>
            <div class="key">ALT</div>
            <div class="key wide">CTRL</div>
          </div>
        </div>
      </div>
    </div>

    <script>
      /* ============================================================
   1) LOADER → HUD TRANSITION
   ============================================================ */
      (function () {
        const WEBSITE_NAME = "Terminal";
        const RUN_MS = 6000;
        const AFTER_DONE_FADE_OUT_MS = 700;
        const WAIT_AFTER_FADE_OUT_MS = 1000;
        const TERMINAL_SHOW_MS = 2000;
        const WAIT_BEFORE_HUD_MS = 3000;

        const overlay = document.getElementById("overlay");
        const scroller = document.getElementById("loaderScroller");
        const term = document.getElementById("loaderTerm");
        const terminalWord = document.getElementById("terminalWord");
        const hud = document.getElementById("hud");

        const rand = (a, b) => Math.floor(a + Math.random() * (b - a + 1));
        const pick = (a) => a[Math.floor(Math.random() * a.length)];

        function targetLen() {
          const r = Math.random();
          if (r < 0.4) return rand(6, 22);
          if (r < 0.78) return rand(24, 55);
          if (r < 0.93) return rand(60, 110);
          if (r < 0.985) return rand(120, 200);
          return rand(220, 360);
        }
        function bar(len) {
          const ch =
            Math.random() < 0.86 ? "-" : Math.random() < 0.5 ? "=" : "—";
          return ch.repeat(len);
        }
        function dashBar() {
          return bar(targetLen());
        }

        function padToLen(s, len) {
          if (s.length >= len) return s;
          const tails = [
            () =>
              ` :: ${pick([
                "id",
                "trace",
                "ctx",
                "node",
                "pid",
                "tid",
                "seg",
                "blk",
                "map",
                "nonce",
              ])}=${Math.random().toString(16).slice(2, rand(6, 16))}`,
            () =>
              ` ${pick(["+", "-", "~", "^", "|", "&"])} ${pick([
                "ok",
                "cache",
                "hit",
                "miss",
                "warm",
                "cold",
                "ready",
                "sync",
              ])}`,
            () =>
              ` ${pick([
                "/api",
                "/v1",
                "/edge",
                "/core",
                "/ui",
                "/net",
              ])}/${pick([
                "session",
                "kernel",
                "router",
                "shader",
                "atlas",
                "fonts",
                "audio",
              ])}?v=${rand(1, 999)}`,
            () =>
              ` ${pick(["t=", "ms=", "ttl=", "mem=", "cpu=", "io="])}${rand(
                1,
                9999
              )}${pick(["", "ms", "s", "%", "MB"])}`,
            () => ` :: ${bar(rand(6, 20))}`,
          ];
          while (s.length < len) {
            s += pick(tails)();
            if (s.length > len + 40) break;
          }
          return s;
        }

        function makeLine() {
          const verbs = [
            "load",
            "init",
            "link",
            "verify",
            "compile",
            "mount",
            "sync",
            "prime",
            "cache",
            "dispatch",
            "resolve",
            "patch",
            "hydrate",
            "commit",
            "probe",
            "warmup",
          ];
          const nouns = [
            "kernel",
            "runtime",
            "renderer",
            "router",
            "session",
            "shader",
            "atlas",
            "audio",
            "fonts",
            "config",
            "sandbox",
            "pipeline",
            "telemetry",
            "scheduler",
            "driver",
            "module",
            "buffer",
            "stream",
          ];
          const mods = [
            "core",
            "ui",
            "net",
            "gfx",
            "auth",
            "edge",
            "db",
            "cache",
            "vm",
            "cdn",
            "bus",
            "ecs",
            "io",
            "ops",
            "ipc",
            "fs",
          ];
          const codes = [
            "OK",
            "READY",
            "PASS",
            "DONE",
            "STABLE",
            "200",
            "204",
            "304",
            "MISS",
            "HIT",
          ];
          const token = () => Math.random().toString(16).slice(2, rand(6, 20));
          const tiny = () =>
            pick([
              "OK",
              "..",
              "::",
              "->",
              "++",
              "--",
              "/",
              "[]",
              "{}",
              "( )",
              "ping",
              "ack",
              "*",
            ]);

          const style = rand(1, 18);
          if (style <= 6) return dashBar();
          if (style === 7) return tiny();
          if (style === 8) return `${tiny()} ${pick(codes)}`;

          let base;
          if (style === 9)
            base = `GET /${pick(mods)}/${pick(nouns)}?v=${rand(
              1,
              999
            )} -> ${pick(codes)}`;
          else if (style === 10)
            base = `${pick(verbs)}:${pick(nouns)} -> ${pick(codes)}`;
          else if (style === 11)
            base = `const ${pick(mods)}_${rand(1, 999)}="${token()}";`;
          else if (style === 12)
            base = `ws wss://edge.${WEBSITE_NAME.toLowerCase()}.io/${pick(
              mods
            )} :: nonce=${token()} :: ${pick(codes)}`;
          else if (style === 13)
            base = `compile ${pick(nouns)}.${pick([
              "mjs",
              "wasm",
              "json",
              "frag",
              "vert",
            ])} :: target=${pick(["webgl2", "wasm32", "x64"])} :: ${pick(
              codes
            )}`;
          else if (style === 14)
            base = `verifyIntegrity sha256:${token()}${token()}${token()} :: policy=${pick(
              ["strict", "standard", "relaxed"]
            )} :: ${pick(codes)}`;
          else if (style === 15)
            base = `route /${pick(mods)}/${pick(nouns)} -> /${pick(
              mods
            )}/${pick(nouns)} :: ttl=${rand(10, 7200)}s :: ${pick([
              "hit",
              "miss",
              "revalidated",
            ])}`;
          else base = `trace ${token()} :: ${token()} :: ${pick(codes)}`;

          const len = targetLen();
          if (Math.random() < 0.78) base = padToLen(base, len);
          return base;
        }

        const pool = [];
        pool.push(`boot ${WEBSITE_NAME} --mode=init`);
        pool.push(dashBar());
        pool.push(`initializing terminal pipeline...`);
        pool.push(dashBar());
        for (let i = 0; i < 900; i++) pool.push(makeLine());

        const lines = [];
        const MAX_KEEP = 1800;

        function render(cursor = true) {
          const text =
            lines.join("\n") + (cursor ? `<span class="cursor"></span>` : "");
          term.innerHTML = text;
        }
        function scrollToBottom() {
          scroller.scrollTop = scroller.scrollHeight;
        }

        function speedAt(t01) {
          const ramp = 0.55 + 0.9 * Math.min(1, t01 * 1.6);
          const settle = 1.0 - 0.25 * Math.max(0, t01 - 0.55) * 1.2;
          const pulse =
            1.0 +
            0.35 * Math.sin(t01 * Math.PI * 10) +
            0.18 * Math.sin(t01 * Math.PI * 23);
          return Math.max(0.25, ramp * settle * pulse);
        }

        let start = performance.now();
        let last = start;
        let index = 0;
        let carry = 0;

        function tick(now) {
          const elapsed = now - start;
          const t01 = Math.min(1, elapsed / RUN_MS);
          const dt = now - last;
          last = now;

          const baseLps = 40;
          const lps = baseLps * speedAt(t01);

          let burst = 1.0;
          if (Math.random() < 0.03) burst = 0.15;
          if (Math.random() < 0.05) burst = 1.8;

          carry += (dt / 1000) * lps * burst;

          const add = Math.floor(carry);
          carry -= add;

          for (let i = 0; i < add; i++) {
            lines.push(pool[index % pool.length]);
            index++;
            if (lines.length > MAX_KEEP) lines.shift();
          }

          render(true);
          scrollToBottom();

          if (elapsed < RUN_MS) {
            requestAnimationFrame(tick);
          } else {
            lines.push(dashBar());
            lines.push(
              `DONE :: ${WEBSITE_NAME} runtime stable — entering interactive mode`
            );
            lines.push(dashBar());
            render(false);
            scrollToBottom();

            setTimeout(() => {
              overlay.classList.add("hide");

              setTimeout(() => {
                overlay.classList.remove("hide");
                term.textContent = "";
                terminalWord.classList.add("show");

                setTimeout(() => {
                  overlay.classList.add("hide");
                  setTimeout(() => {
                    hud.classList.add("show");
                    // focus terminal input when HUD shows
                    setTimeout(() => {
                      const inp = document.getElementById("termInput");
                      if (inp) inp.focus();
                    }, 60);
                  }, WAIT_BEFORE_HUD_MS);
                }, TERMINAL_SHOW_MS);
              }, WAIT_AFTER_FADE_OUT_MS);
            }, AFTER_DONE_FADE_OUT_MS);
          }
        }

        render(true);
        scrollToBottom();
        requestAnimationFrame(tick);
      })();

      /* ============================================================
   2) HUD ANIMATIONS (clock, globe spin, moving graphs)
   ============================================================ */
      (function () {
        const clockEl = document.getElementById("clock");
        const dateLine = document.getElementById("dateLine");
        const uptimeLine = document.getElementById("uptimeLine");

        const cpuPath = document.getElementById("cpuPath");
        const netPath = document.getElementById("netPath");
        const memFill = document.getElementById("memFill");

        const pingLine = document.getElementById("pingLine");
        const upLine = document.getElementById("upLine");
        const downLine = document.getElementById("downLine");
        const ipLine = document.getElementById("ipLine");
        const latlon = document.getElementById("latlon");

        const globeGrid = document.getElementById("globeGrid");

        const rand = (a, b) => Math.floor(a + Math.random() * (b - a + 1));
        const pad2 = (n) => String(n).padStart(2, "0");

        // uptime
        const bootAt = Date.now() - rand(5 * 60 * 1000, 6 * 60 * 60 * 1000);

        function tickClock() {
          const d = new Date();
          const h = pad2(d.getHours());
          const m = pad2(d.getMinutes());
          const s = pad2(d.getSeconds());
          clockEl.textContent = `${h}:${m}:${s}`;

          const months = [
            "JAN",
            "FEB",
            "MAR",
            "APR",
            "MAY",
            "JUN",
            "JUL",
            "AUG",
            "SEP",
            "OCT",
            "NOV",
            "DEC",
          ];
          dateLine.textContent = `${
            months[d.getMonth()]
          } ${d.getDate()} ${d.getFullYear()}`;

          const up = Math.max(0, Date.now() - bootAt);
          const uh = Math.floor(up / 3600000);
          const um = Math.floor((up % 3600000) / 60000);
          const us = Math.floor((up % 60000) / 1000);
          uptimeLine.textContent = `${pad2(uh)}:${pad2(um)}:${pad2(us)}`;
        }
        tickClock();
        setInterval(tickClock, 250);

        // Globe "spin" by moving the grid texture
        let gx = 0;
        function spinGlobe() {
          gx = (gx + 0.6) % 180; // speed
          globeGrid.style.transform = `translateX(${-gx}px)`;
          requestAnimationFrame(spinGlobe);
        }
        requestAnimationFrame(spinGlobe);

        // Graph animation helper
        function updatePath(pathEl, points, height) {
          // points: array 0..1
          const step = 220 / (points.length - 1);
          let d = `M0,${height - points[0] * height}`;
          for (let i = 1; i < points.length; i++) {
            const x = i * step;
            const y = height - points[i] * height;
            d += ` L${x},${y}`;
          }
          pathEl.setAttribute("d", d);
        }

        // CPU & NET time-series
        const cpu = Array.from({ length: 12 }, () => Math.random() * 0.6 + 0.2);
        const net = Array.from(
          { length: 12 },
          () => Math.random() * 0.7 + 0.15
        );

        function drift(arr, min, max, jitter) {
          // push one new value, remove oldest
          const last = arr[arr.length - 1];
          let next = last + (Math.random() - 0.5) * jitter;
          next = Math.max(min, Math.min(max, next));
          arr.shift();
          arr.push(next);
        }

        function tickGraphs() {
          // CPU: more “spiky”
          drift(cpu, 0.08, 0.98, 0.28);
          updatePath(cpuPath, cpu, 50);

          // NET: smoother
          drift(net, 0.1, 0.95, 0.18);
          updatePath(netPath, net, 60);

          // Memory bar subtle breathe
          const mem =
            0.55 +
            Math.sin(Date.now() / 1800) * 0.08 +
            (Math.random() - 0.5) * 0.01;
          memFill.style.width = `${Math.max(0.35, Math.min(0.88, mem)) * 100}%`;

          // stats wiggle
          const ping = rand(9, 28);
          pingLine.textContent = `${ping}ms`;

          const upGb = (
            32 +
            Math.sin(Date.now() / 5000) * 4 +
            Math.random() * 0.6
          ).toFixed(1);
          const downGb = (
            86 +
            Math.cos(Date.now() / 4300) * 5 +
            Math.random() * 0.8
          ).toFixed(1);
          upLine.textContent = `${upGb} GB`;
          downLine.textContent = `${downGb} GB`;

          // tiny IP / latlon flicker sometimes (cosmetic)
          if (Math.random() < 0.02) {
            ipLine.textContent = `${rand(10, 220)}.${rand(0, 255)}.${rand(
              0,
              255
            )}.${rand(0, 255)}`;
          }
          if (Math.random() < 0.02) {
            const la = (-26.2041 + (Math.random() - 0.5) * 0.12).toFixed(4);
            const lo = (28.0473 + (Math.random() - 0.5) * 0.12).toFixed(4);
            latlon.textContent = `${la}, ${lo}`;
          }

          requestAnimationFrame(tickGraphs);
        }
        requestAnimationFrame(tickGraphs);
      })();

      /* ============================================================
   3) INTERACTIVE TERMINAL (MAIN - bash)
   Commands + "hacker 101011" spam effect
   ============================================================ */
      (function () {
        const out = document.getElementById("centerTerminal");
        const input = document.getElementById("termInput");

        // Safe HTML escape
        const esc = (s) =>
          String(s)
            .replaceAll("&", "&amp;")
            .replaceAll("<", "&lt;")
            .replaceAll(">", "&gt;");

        function writeLine(s = "") {
          out.innerHTML += esc(s) + "\n";
          out.scrollTop = out.scrollHeight;
        }

        function writeBlock(lines) {
          for (const l of lines) writeLine(l);
        }

        function promptEcho(cmd) {
          writeLine(`main@terminal:~$ ${cmd}`);
        }

        function randBinLine() {
          // builds a “hacker-ish” binary line with uneven spacing & occasional digits
          const chunks = [];
          const n = Math.floor(4 + Math.random() * 12);
          for (let i = 0; i < n; i++) {
            const len = Math.floor(2 + Math.random() * 10);
            let chunk = "";
            for (let j = 0; j < len; j++) {
              const r = Math.random();
              if (r < 0.82) chunk += Math.random() < 0.5 ? "0" : "1";
              else chunk += String(Math.floor(Math.random() * 10));
            }
            chunks.push(chunk);
          }
          // random spacing (some double spaces)
          return chunks.join(Math.random() < 0.5 ? " " : "  ");
        }

        let streamTimer = null;
        function stopStream(silent = false) {
          if (streamTimer) {
            clearInterval(streamTimer);
            streamTimer = null;
            if (!silent) writeLine("[stream halted]");
          }
        }

        function startBinaryStream(ms = 1800, lps = 22) {
          stopStream(true);
          writeLine("[initiating stream]");
          const interval = Math.max(10, Math.floor(1000 / lps));
          const started = performance.now();

          streamTimer = setInterval(() => {
            // bursty output
            const burst = Math.random() < 0.25 ? 4 : 2;
            for (let i = 0; i < burst; i++) writeLine(randBinLine());
            if (performance.now() - started > ms) {
              clearInterval(streamTimer);
              streamTimer = null;
              writeLine("[stream complete]");
            }
          }, interval);
        }

        /* =========================
           NEW: helper for `open <url>`
           ========================= */
        function openLinkFromCmd(fullCmd) {
          let raw = fullCmd.trim().slice(5).trim(); // remove "open "
          if (!raw) {
            writeLine("usage: open <url>");
            return;
          }

          raw = raw.replace(/^["']|["']$/g, "");
          if (!/^https?:\/\//i.test(raw)) raw = "https://" + raw;

          try {
            const u = new URL(raw);
            if (!["http:", "https:"].includes(u.protocol)) {
              writeLine("blocked: only http/https allowed");
              return;
            }
            window.open(u.toString(), "_blank", "noopener,noreferrer");
            writeLine(`opening: ${u.toString()}`);
          } catch {
            writeLine("invalid url");
          }
        }

        /* =========================
           NEW: storage info (best-effort)
           - Navigator StorageManager gives quota/usage in some browsers/https only
           ========================= */
        async function showStorage() {
          // LocalStorage used is always measurable
          let lsBytes = 0;
          try {
            for (let i = 0; i < localStorage.length; i++) {
              const k = localStorage.key(i);
              const v = localStorage.getItem(k) || "";
              lsBytes += (k ? k.length : 0) + v.length;
            }
          } catch {}

          const pretty = (bytes) => {
            if (!isFinite(bytes) || bytes < 0) return "N/A";
            const units = ["B", "KB", "MB", "GB", "TB"];
            let u = 0;
            let b = bytes;
            while (b >= 1024 && u < units.length - 1) {
              b /= 1024;
              u++;
            }
            return `${b.toFixed(u === 0 ? 0 : 2)} ${units[u]}`;
          };

          writeLine("STORAGE:");
          writeLine(`  localStorage approx: ${pretty(lsBytes)} (rough)`);

          // Browser quota/usage (not always available)
          if (navigator.storage && navigator.storage.estimate) {
            try {
              const est = await navigator.storage.estimate();
              const usage = est.usage ?? NaN;
              const quota = est.quota ?? NaN;
              writeLine(`  browser usage: ${pretty(usage)}`);
              writeLine(`  browser quota: ${pretty(quota)}`);
              if (isFinite(usage) && isFinite(quota) && quota > 0) {
                writeLine(
                  `  percent used: ${((usage / quota) * 100).toFixed(1)}%`
                );
              }
            } catch {
              writeLine("  browser estimate: unavailable");
            }
          } else {
            writeLine("  browser estimate: unsupported");
          }
        }

        // You can define your own commands here:
        const COMMANDS = {
          help: () =>
            writeBlock([
              "Available commands:",
              "  help",
              "  clear",
              "  exec order 66",
              "  stream",
              "  stop",
              "  ping",
              "  whoami",
              "  status",
              "  name            (shows website/terminal name)",
              "  open <url>      (opens link in new tab)",
              "  storage         (shows browser storage info if available)",
            ]),
          clear: () => {
            out.textContent = "";
          },
          whoami: () => writeLine("main"),
          ping: () =>
            writeLine(
              `PING 127.0.0.1 (icmp) time=${(8 + Math.random() * 20).toFixed(
                1
              )}ms`
            ),
          status: () =>
            writeBlock([
              "SYSTEM STATUS:",
              `  UPLINK: OK`,
              `  ENCRYPT: ACTIVE`,
              `  ROUTER: STABLE`,
              `  TRACE: ${Math.random().toString(16).slice(2, 10)}`,
            ]),
          stream: () => startBinaryStream(2500, 30),
          stop: () => stopStream(false),
          name: () =>
            writeLine(
              `SITE NAME: ${document.title || "Terminal"}  (host: ${
                location.hostname || "local"
              })`
            ),
          storage: () => {
            showStorage();
          },
          "exec order 66": () => {
            writeLine("[exec] order 66");
            writeLine("handshake... OK");
            writeLine("elevating privileges... OK");
            startBinaryStream(4200, 34);
            setTimeout(() => {
              writeBlock([
                "injecting payload... OK",
                "spawning agents... OK",
                "routing via edge nodes... OK",
                "DONE",
              ]);
            }, 1800);
          },
        };

        // boot text
        writeBlock(["Terminal ready.", "Type 'help' for commands.", ""]);

        function runCommand(raw) {
          const cmd = raw.trim();
          if (!cmd) return;

          promptEcho(cmd);

          // NEW: handle `open <url>` (must be direct user action to avoid popup-block)
          if (cmd.toLowerCase().startsWith("open ")) {
            openLinkFromCmd(cmd);
            return;
          }

          // direct match first (so "exec order 66" works)
          if (COMMANDS[cmd]) {
            COMMANDS[cmd]();
            return;
          }

          // small quality: allow "exec ..." to be custom-mapped later
          if (cmd.startsWith("exec ")) {
            writeLine(`unknown exec target: ${cmd.slice(5)}`);
            return;
          }

          writeLine(`command not found: ${cmd}`);
        }

        input.addEventListener("keydown", (e) => {
          if (e.key === "Enter") {
            const v = input.value;
            input.value = "";
            runCommand(v);
          } else if (e.key === "Escape") {
            stopStream(false);
          }
        });

        // auto-focus when clicking anywhere in center panel
        out.addEventListener("mousedown", () => input.focus());
      })();
    </script>
    <!-- Hand tracking + 3D (CDNs) -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

    <!-- Your separate script -->
    <script src="./gesture-hud.js"></script>
  </body>
</html>
